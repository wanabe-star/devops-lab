To install Apache tomcat in root folder

1.	Restart the Ubuntu virtual box and when it starts booting  press Shift + Esc key together
2.	Restart again and when the black screen comes press Shift key
3.	Sudo –i // to go to root directory
4.	Sudo apt update && sudo upgrade –y
5.	cd /tmp
6.	wget https://dlcdn.apache.org/tomcat/tomcat-9/v9.0.100/bin/apache-tomcat-9.0.100.tar.gz
7.	cd ..
8.	cd opt
9.	mkdir tomcat
10.	cd ..
11.	cd tmp
12.	tar file has to be extracted into the tomcat folder so run the below command
13.	sudo tar -xvzf apache-tomcat-9.0.100.tar.gz -C /opt/tomcat --strip-components=1
14.	cd ..
15.	cd opt/tomcat
16.	ls // we can see all files are extracted 
17.	cd conf
18.	ls // we can see server.xml use this file to change the port number from default 8080 to any number say 9090 because Jenkins is running on 8080
19.	gedit server.xml // go to line number 70 and change the portnumber to 9090  <connector port=9090…..> save
20.	we need to create tomcat users as well so add the users in tomcat-users.xml file
21.	gedit tomcat-users.xml  
22.	line 22 add  <user username="admin" password="Admin" roles="manager-gui"/> then save
23.	cd ..
24.	cd bin
25.	ls // we can startup.sh and shutdown,sh to start the tomcat and stop the tomcat 
26.	just try opening the page in browser say localhost:9090  it displays page cannot be displayed so we need to start the tomcat
27.	sh startup.sh
28.	now check in the browser, localhost:9090  tomcat web page is displayed
29.	go to manage app on the right side of the web page it will ask for username and password. Enter the user name and password what we added in the step number 22
30.	The server displays default files along with the user created files if any
31.	 Go back to terminal and type cd ..
32.	Ls // we can see webapps folder this is where we will be copying the war file generated by maven based web application



When we run ansible script on jenkins it says tomcat server not found so to fix this bug, do run the following commands and add tomcat.service file in /etc/systemd/system in root directory
1. Set Permissions for the username hemavathi
sudo chown -R tomcat:hemavathi /opt/tomcat
sudo chmod +x /opt/tomcat/bin/*.sh

2. write the tomcat.service file
sudo -i
cd /
cd etc/systemd/system
ls
//please check for the tomcat.service file,if available ignore the below steps,if not do add the tomcat.service file 

4. gedit tomcat.service

After=network.target

[Service]
Type=forking

User=tomcat
Group=tomcat

Environment="JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64"
Environment="CATALINA_PID=/opt/tomcat/temp/tomcat.pid"
Environment="CATALINA_HOME=/opt/tomcat"
Environment="CATALINA_BASE=/opt/tomcat"

ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh

Restart=on-failure

[Install]
WantedBy=multi-user.target


5. Now we can start and stop the tomcat server directly from user instead of from root directory
hemavathi@hemavathi-VirtualBox:~$ sudo systemctl stop tomcat
hemavathi@hemavathi-VirtualBox:~$ sudo systemctl start tomcat


6. Sometimes it says permission denied for creating pipeline for webapplication on jenkins so kindly follow the commands
//Downloads the latest official Jenkins GPG key and Saves the key in /usr/share/keyrings/ so that apt can use it for verification.

hemavathi@hemavathi-VirtualBox:~$ curl -fsSL https://pkg.jenkins.io/debian/jenkins.io-2023.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null

// Associate the Repository with the New Key
After adding the key, we must explicitly tell the system to use it for verifying Jenkins packages: 
This ensures that only trusted Jenkins packages will be installed.

hemavathi@hemavathi-VirtualBox:~$ echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian binary/" | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null

hemavathi@hemavathi-VirtualBox:~$ sudo apt update

after this restart the jenkins
localhost:8080/safeRestart















